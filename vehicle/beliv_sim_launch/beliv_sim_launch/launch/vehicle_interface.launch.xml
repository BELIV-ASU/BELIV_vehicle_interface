<?xml version="1.0" encoding="UTF-8"?>
<launch>
  <arg name="vehicle_id" default="$(env VEHICLE_ID default)"/>
 
   <!-- Launch simulator and load vehicle model -->
  <include file="$(find-pkg-share dataspeed_dbw_gazebo)/launch/dataspeed_dbw_gazebo.launch.xml" >
    <arg name="use_camera_control" value="true" />
    <arg name="world_name" value="$(find-pkg-share ds_autonomy_sim_demo)/worlds/empty.world" />
    <arg name="sim_param_file" value="$(find-pkg-share ds_autonomy_sim_demo)/config/sim_params.yaml" />
    <arg name="headless" value="False" />
  </include>

  <!-- Vehicle Interface Parm--> 
  <arg name="vehicle_name" default="vehicle" />
  <include file="$(find-pkg-share beliv_vehicle_interface)/launch/dbw.launch.xml" >
    <arg name="live" value="false" />
    <arg name="load_urdf" value="false" />
    <arg name="can_ns" value="can_bus_dbw" />
    <arg name="vehicle_ns" value="$(var vehicle_name)" />
    <arg name="ackermann_wheelbase" value="2.98" />
    <arg name="steering_ratio" value="14.6" />
  </include>
  
  <!--Beliv Vehcile Interface-->
  <node pkg="beliv_vehicle_interface" exec="beliv_veh_interface" output="screen" >
  	<remap from="/vehicle/status/control_mode" to="/beliv/status/control_mode"/>
  	<remap from="/vehicle/status/velocity_status" to="/beliv/status/velocity_status"/>
  	<remap from="/vehicle/status/steering_status" to="/beliv/status/gear_status"/>
  	<remap from="/vehicle/status/turn_indicators_status" to="/beliv/status/turn_indicators_status"/>
  	<remap from="/vehicle/status/hazard_lights_status" to="/beliv/status/hazard_lights_status"/>
  	<remap from="/vehicle/status/steering_wheel_status" to="/beliv/status/steering_wheel_status"/>
  	<remap from="/vehicle/status/door_status" to="/beliv/status/door_status"/>
  </node>
  
    <!-- Node that publishes system enable and DBW enable signals -->
  <node pkg="ds_autonomy_sim_demo" exec="sys_enable.py" output="screen" >
    <param name="use_sim_time" value="True" />
  </node>
</launch>
